<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>{{title}}</title>
  <script src="https://code.jquery.com/jquery-3.7.0.min.js"
    integrity="sha256-2Pmvv0kuTBOenSvLm6bvfBSSHrUJ+3A7x6P5Ebd07/g=" crossorigin="anonymous"></script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-validate/1.19.5/jquery.validate.min.js"
    integrity="sha512-rstIgDs0xPgmG6RX1Aba4KV5cWJbAMcvRCVmglpam9SoHZiUCyQVDdH2LPlxoHtrv17XWblE/V/PP+Tr04hbtA=="
    crossorigin="anonymous" referrerpolicy="no-referrer"></script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-validate/1.19.5/additional-methods.min.js"
    integrity="sha512-6S5LYNn3ZJCIm0f9L6BCerqFlQ4f5MwNKq+EthDXabtaJvg3TuFLhpno9pcm+5Ynm6jdA9xfpQoMz2fcjVMk9g=="
    crossorigin="anonymous" referrerpolicy="no-referrer"></script>
  <link rel="stylesheet" href="/assets/vendors/bootstrap/dist/css/bootstrap.min.css">
  <link rel="stylesheet" href="/assets/vendors/font-awesome/css/font-awesome.min.css">
  <link rel="stylesheet" href="/assets/vendors/themify-icons/css/themify-icons.css">
  <link rel="stylesheet" href="/assets/vendors/flag-icon-css/css/flag-icon.min.css">
  <link rel="stylesheet" href="/assets/vendors/selectFX/css/cs-skin-elastic.css">
  <link rel="stylesheet" href="/assets/vendors/jqvmap/dist/jqvmap.min.css">

  <link rel="stylesheet" href="/assets/css/style.css">

  <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,600,700,800' rel='stylesheet' type='text/css'>

  <script src="/javascripts/toastr.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.6.2/socket.io.js"></script>
  <link href="/stylesheets/toastr.css" rel="stylesheet" />
  <style>
    form .error {
      color: red
    }

    .image-upload {
      height: 100px;
      width: 100px;
    }

    .profilePicture {
      height: 130px;
      width: 130px;
    }
  </style>

</head>

<body>

  {{#compare user.role "==" "admin"}}
  {{> admin-panel}}
  {{/compare}}

  {{#compare user.role "==" "user"}}
  {{> user-panel}}
  {{/compare}}

  <div id="right-panel" class="right-panel">
    {{> header}}
    {{{body}}}

  </div>

  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

  {{!--
  <script src="https://unpkg.com/sweetalert2@7.8.2/dist/sweetalert2.all.js"></script> --}}
  <script src="/assets/vendors/jquery/dist/jquery.min.js"></script>
  <script src="/assets/vendors/popper.js/dist/umd/popper.min.js"></script>
  <script src="/assets/vendors/bootstrap/dist/js/bootstrap.min.js"></script>
  <script src="/assets/js/main.js"></script>
  {{!--
  <script src="/assets/vendors/chart.js/dist/Chart.bundle.min.js"></script> --}}
  {{!--
  <script src="/assets/js/dashboard.js"></script> --}}
  {{!--
  <script src="/assets/js/widgets.js"></script> --}}
  {{!--
  <script src="/assets/vendors/jqvmap/dist/jquery.vmap.min.js"></script> --}}
  {{!--
  <script src="/assets/vendors/jqvmap/examples/js/jquery.vmap.sampledata.js"></script> --}}
  {{!--
  <script src="/assets/vendors/jqvmap/dist/maps/jquery.vmap.world.js"></script> --}}
  <script>

    //if user's role is admin than user will join adminRoom of socket to get notification on image upload
    if ("{{user.role}}" == 'admin') {
      const socket = io({
        query: { "RoomID": "adminRoom" }
      });
      socket.on("imageUpload", (data) => {
        toastr.success(`Image Uploaded by ${data.userName}`);
      });

      socket.on("withdrawRequest", (data) => {
        toastr.success(`Withdraw Requested by ${data.userName}`);
      });
    }

    //else if user's role is user than user will join userRoom of socket to get notification on reference user's registration
    else if ("{{user.role}}" == 'user') {
      const socket = io({
        query: { "RoomID": "userRoom" }
      });
      socket.on("registerWithReferLink", (data) => {
        if ("{{user._id}}" == data.referredBy) {
          toastr.success(`${data.userName} registered with your referral link`);
        }
      });

      socket.on("requestUpdate", (data) => {
        if ("{{user._id}}" == data.userId) {
          toastr.success(`${data.message}`);
        }
      });

    }

    (function ($) {
      "use strict";
      /**jQuery('#vmap').vectorMap({
        map: 'world_en',
        backgroundColor: null,
        color: '#ffffff',
        hoverOpacity: 0.7,
        selectedColor: '#1de9b6',
        enableZoom: true,
        showTooltip: true,
        //values: sample_data,
        scaleColors: ['#1de9b6', '#03a9f5'],
        normalizeFunction: 'polynomial'
      });
      **/
    })(jQuery);

  </script>
</body>

</html>